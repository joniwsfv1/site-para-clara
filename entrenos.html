<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBrv-pX5Kz0anUKkAFwj-di_2xGc-Hkg4c",
  authDomain: "joni-e-clara.firebaseapp.com",
  databaseURL: "https://joni-e-clara-default-rtdb.firebaseio.com",
  projectId: "joni-e-clara",
  storageBucket: "joni-e-clara.appspot.com",
  messagingSenderId: "173695416195",
  appId: "1:173695416195:web:fc7c7dd41dad40e3e028b6"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
</script>


<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Entre NÃ³s â€” Joni & Clara</title>

<!-- Fonte romÃ¢ntica e legÃ­vel -->
<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  background: #000;
  color: #fff;
  font-family: 'Patrick Hand', cursive;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.container {
  max-width: 400px;
  width: 100%;
  padding: 20px;
  text-align: center;
}

h1 {
  font-size: 2.2em;
  margin-bottom: 10px;
}

.question {
  font-size: 1.4em;
  margin: 20px 0;
}

button {
  width: 100%;
  padding: 15px;
  margin: 10px 0;
  font-size: 1.2em;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  background: #fff;
  color: #000;
}

button:disabled {
  opacity: 0.5;
}

.result {
  margin-top: 20px;
  font-size: 1.3em;
}
</style>
</head>
<body>

<div class="container">
  <h1>ğŸ’– Entre NÃ³s</h1>
  <div id="status">Aguardando o outro jogadorâ€¦</div>

  <div class="question" id="question"></div>

  <button onclick="choose(0)" id="btn1"></button>
  <button onclick="choose(1)" id="btn2"></button>

  <div class="result" id="result"></div>
</div>



<script>
let current = 0;
let answered = false;
let score = 0;

  
  const room = location.hash.replace("#", "") || "joni-e-clara";
location.hash = room;

const playerId = Math.random().toString(36).substr(2, 9);
const roomRef = db.ref("rooms/" + room);

const questions = [
  { q: "Um sÃ¡bado perfeito Ã©...", a: ["Ficar em casa juntos", "Sair sem rumo"] },
  { q: "Filme ideal?", a: ["Romance", "Terror"] },
  { q: "Quem sente mais saudade?", a: ["Joni", "Clara"] },
  { q: "Viagem dos sonhos?", a: ["Praia", "Montanha"] },
  { q: "Mais ciumento?", a: ["Joni", "Clara"] }
];


let current = 0;
let answered = false;

function loadQuestion() {
  answered = false;

  document.getElementById("question").innerText =
    questions[current].q;

  document.getElementById("btn1").innerText =
    questions[current].a[0];

  document.getElementById("btn2").innerText =
    questions[current].a[1];

  document.getElementById("result").innerText = "";
}


roomRef.child("answers/" + current).on("value", snap => {
  const answers = snap.val();
  if (!answers) return;

  const players = Object.keys(answers);
  if (players.length < 2) return;

  const values = Object.values(answers);

  if (values[0] === values[1]) {
    score++;
    document.getElementById("result").innerText =
      "ğŸ’– VocÃªs pensaram igual!";
  } else {
    document.getElementById("result").innerText =
      "ğŸ˜… Diferentes, mas combinam!";
  }

  setTimeout(nextQuestion, 2000);
});


function choose(option) {
  if (answered) return;
  answered = true;

  roomRef
    .child("answers/" + current + "/" + playerId)
    .set(option);
}

  
  function nextQuestion() {
  roomRef.child("answers/" + current).remove();

  current++;

  if (current >= questions.length) {
    showResult();
  } else {
    loadQuestion();
  }
}

function showResult() {
  const percent = Math.round((score / questions.length) * 100);

  document.getElementById("question").innerText =
    "Resultado Final ğŸ’˜";

  document.getElementById("btn1").style.display = "none";
  document.getElementById("btn2").style.display = "none";

  document.getElementById("result").innerHTML = `
    VocÃªs combinaram em <b>${percent}%</b> ğŸ’•<br><br>
    ${percent >= 80 ? "Almas gÃªmeas ğŸ¥°" :
      percent >= 50 ? "Casal forte ğŸ’" :
      "Opostos que se atraem ğŸ˜"}
  `;
}


loadQuestion();
</script>
<body
<a href="entrenos.html">ğŸ’– Jogar Entre NÃ³s</a>
</body>

</html>
